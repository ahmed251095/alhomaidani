<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- لو بتستخدم تمبليت الافتراضي بتاع Odoo -->
    <template id="inject_cover_before_external_layout" inherit_id="sale.report_saleorder_document">
      <!-- حقن صفحة الغلاف قبل استدعاء external_layout -->
      <xpath expr="//t[@t-call='web.external_layout']" position="before">
        <!-- o هو المتغير الافتراضي في تمبليت Odoo (t-foreach='docs' t-as='o') -->
        <t t-set="company" t-value="o.company_id"/>
        <!-- صفحة الغلاف خارج الlayout = بدون هيدر/فوتر -->
        <div class="page" style="padding:0; margin:0; direction:rtl; text-align:center;">
          <t t-if="company.sale_report_cover">
            <img t-att-src="'/web/image/res.company/%s/sale_report_cover' % company.id"
                 style="width:100%; height:100%; object-fit:cover; display:block; margin:0;"/>
          </t>
          <t t-else="">
            <img src="/company_sale_report_cover/static/src/img/default_cover.jpg"
                 style="width:100%; height:100%; object-fit:cover; display:block; margin:0;"/>
          </t>
        </div>
      </xpath>
    </template>

    <!-- لو الأكشن عندك بيستخدم تمبليت مخصص (modern_report_saleorder_document)
         استبدل inherit_id بالـ id عندك بدل السطر اللي فوق -->
    <!--
    <template id="inject_cover_on_custom" inherit_id="your_module.modern_report_saleorder_document">
      <xpath expr="//t[@t-call='web.external_layout']" position="before">
        <t t-set="company" t-value="doc.company_id or (res_company)"/>
        <div class="page" style="padding:0; margin:0; direction:rtl; text-align:center;">
          <t t-if="company.sale_report_cover">
            <img t-att-src="'/web/image/res.company/%s/sale_report_cover' % company.id"
                 style="width:100%; height:100%; object-fit:cover; display:block; margin:0;"/>
          </t>
          <t t-else="">
            <img src="/company_sale_report_cover/static/src/img/default_cover.jpg"
                 style="width:100%; height:100%; object-fit:cover; display:block; margin:0;"/>
          </t>
        </div>
      </xpath>
    </template>
    -->

  </data>
</odoo>
