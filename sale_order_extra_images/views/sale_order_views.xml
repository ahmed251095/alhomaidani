<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- Dedicated tree view for sale.order.image -->
    <record id="sale_order_image_tree" model="ir.ui.view">
      <field name="name">sale.order.image.tree</field>
      <field name="model">sale.order.image</field>
      <field name="arch" type="xml">
        <tree editable="bottom">
          <field name="sequence" widget="handle"/>
          <field name="name"/>
          <field name="image_1024" widget="image" width="80" height="80"/>
          <field name="active"/>
        </tree>
      </field>
    </record>

    <!-- Dedicated form view for sale.order.image -->
    <record id="sale_order_image_form" model="ir.ui.view">
      <field name="name">sale.order.image.form</field>
      <field name="model">sale.order.image</field>
      <field name="arch" type="xml">
        <form>
          <group>
            <field name="sequence"/>
            <field name="name"/>
            <field name="image_1920" widget="image" class="oe_avatar"/>
            <field name="active"/>
          </group>
        </form>
      </field>
    </record>

    <!-- Inherit Sale Order form to add tab -->
    <record id="view_order_form_inherit_extra_images" model="ir.ui.view">
      <field name="name">sale.order.form.extra.images</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form"/>
      <field name="arch" type="xml">
        <xpath expr="//notebook" position="inside">
          <page string="صور الطباعة">
            <field name="extra_image_ids" mode="tree,form"
                   context="{'default_sale_id': active_id}"
                   domain="[('active','=',True)]"
                   tree_view_ref="sale_order_extra_images_v3.sale_order_image_tree"
                   form_view_ref="sale_order_extra_images_v3.sale_order_image_form"/>
          </page>
        </xpath>
      </field>
    </record>

  </data>
</odoo>
